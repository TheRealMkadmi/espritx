{% extends 'views/layouts/contentLayoutMaster.html.twig' %}

{% block title%}{% endblock %}

{% block vendor_style %}
    <link rel="stylesheet" href="{{ asset('vendors/css/calendars/fullcalendar.min.css') }}">
    <link rel="stylesheet" href="{{ asset('vendors/css/forms/select/select2.min.css') }}">
    <link rel="stylesheet" href="{{ asset('vendors/css/pickers/flatpickr/flatpickr.min.css') }}">
{% endblock %}


{% block page_style %}
    <link rel="stylesheet" href="{{ asset('css/base/plugins/forms/pickers/form-flat-pickr.css') }}">
    <link rel="stylesheet" href="{{ asset('css/base/pages/app-calendar.css') }}">
    <link rel="stylesheet" href="{{ asset('css/base/plugins/forms/form-validation.css') }}">
{% endblock %}


{% block content %}
    <section>
        <div class="app-calendar overflow-hidden border">
            <div class="row g-0">

                <div class="col app-calendar-sidebar flex-grow-0 overflow-hidden d-flex flex-column" id="app-calendar-sidebar">
                    <div class="sidebar-wrapper">
                        <div class="card-body d-flex justify-content-center">
                            <button class="btn btn-info btn-toggle-sidebar w-100" >
                                <a href="{{ path('all_events_data') }}">
                                    <span class="align-middle">Afficher Evenement</span>
                                </a>
                            </button>
                        </div>
                        <div class="card-body d-flex justify-content-center">
                            <button class="btn btn-info btn-toggle-sidebar w-100" >
                                <a href="{{ path('indexCall') }}">
                                    <span class="align-middle">Afficher Call</span>
                                </a>
                            </button>
                            
                        </div>
                        
                    </div>
                    <div class="mt-auto">
                        <img
                                src="{{asset('images/pages/calendar-illustration.png')}}"
                                alt="Calendar illustration"
                                class="img-fluid"
                        />
                    </div>
                </div>

                <div class="col position-relative">
                    <div class="card shadow-none border-0 mb-0 rounded-0">
                        <div class="card-body pb-0">
                           
                            <b>Evenement</b>
                            <hr>
 <table class="table">
        <thead>
            <tr>
                <th>Id</th>
                <th>Title</th>
                <th>Start</th>
                <th>End</th>
                <th>Description</th>
                <th>All_day</th>
                
                <th>actions</th>
            </tr>
        </thead>
        <tbody>
        {% for event in dataEvent %}
            <tr>
                <td>{{ event.id }}</td>
                <td>{{ event.title }}</td>
                <td>{{ event.start ? event.start|date('Y-m-d H:i:s') : '' }}</td>
                <td>{{ event.end ? event.end|date('Y-m-d H:i:s') : '' }}</td>
                <td>{{ event.description }}</td>
                <td>{{ event.allDay ? 'Yes' : 'No' }}</td>
               
                <td>
                   <a href="{{ path('deleteEventback', {'id': event.id}) }}"><i data-feather="trash"></i></a>
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="8">no records found</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <hr>
    <b>Call</b>
    <hr>
     <table class="table">
        <thead>
            <tr>
                <th>Id</th>
                <th>Title</th>
                <th>Start</th>
                <th>End</th>
                <th>Description</th>
                <th>Members</th>
                
                
                <th>actions</th>
            </tr>
        </thead>
        <tbody>
        {% for call in dataCall %}
            <tr>
                <td>{{ call.id }}</td>
                <td>{{ call.title }}</td>
                <td>{{ call.start ? call.start|date('Y-m-d H:i:s') : '' }}</td>
                <td>{{ call.end ? call.end|date('Y-m-d H:i:s') : '' }}</td>
                <td>{{ call.description }}</td>
                
               <td>
               {% for user in call.users %}
                    {{ user.firstName }} {{ user.lastName }}
                    {% else %}
                    no Member yet
                {% endfor %}
                </td>
                
                <td>
                   
                    <a href="{{ path('deleteCallback', {'id': call.id}) }}">
                        <i data-feather="trash"></i>
                    </a>
                </td>
                
                
                
            </tr>
        {% else %}
            <tr>
                <td colspan="8">no records found</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

                        </div>
                    </div>
                </div>

                <div class="body-content-overlay"></div>
            </div>
        </div>
      

    </section>

    
{% endblock %}


{% block vendor_script %}
    <script src="{{ asset('vendors/js/extensions/moment.min.js') }}"></script>
    <script src="{{ asset('vendors/js/forms/select/select2.full.min.js') }}"></script>
    <script src="{{ asset('vendors/js/forms/validation/jquery.validate.min.js') }}"></script>
    <script src="{{ asset('vendors/js/pickers/flatpickr/flatpickr.min.js') }}"></script>
{% endblock %}


{% block page_script %}
<script src="https://cdn.jsdelivr.net/npm/fullcalendar-scheduler@5.10.2/main.min.js"
        integrity="sha256-YK3r7IQuHVY5YtEUbGuFMcwtIYCRtRKpZyMej0emzBc=" crossorigin="anonymous"></script>

{% endblock %}

